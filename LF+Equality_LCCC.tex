\documentclass{article}
\usepackage[left=1in,right=1in,tmargin = 25mm,bmargin = 25mm]{geometry}
\usepackage[left=1in,right=1in]{geometry}
\usepackage{subfiles}
\usepackage{amsmath, amssymb, stmaryrd, verbatim, bbm} % math symbols
\usepackage{amsthm} % thm environment
\usepackage{mdframed} % Customizable Boxes
\usepackage{hyperref,nameref,cleveref,enumitem} % for references, hyperlinks
\usepackage[dvipsnames]{xcolor} % Fancy Colours
\usepackage{mathrsfs} % Fancy font
\usepackage{tikz, tikz-cd, float} % Commutative Diagrams
\usepackage{perpage}
\usepackage{parskip} % So that paragraphs look nice
\usepackage{ifthen,xargs} % For defining better commands
\usepackage{anyfontsize}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{tgpagella}
\usepackage{titlesec}
\usepackage{url}
\usepackage{listings}
\usepackage{stmaryrd}
\usepackage{proof}
\usepackage{multicol}
\usepackage{mathpartir}

% % Misc
\newcommand{\STLC}{\la^{\times \to}}
\newcommand{\LF}[1]{\la^{\Pi \mathsf{Eq}}[#1]}
\newcommand{\tdt}{\times \cdots \times}

% % Parens
\newcommand{\brkt}[1]{\left(#1\right)}
\newcommand{\sqbrkt}[1]{\left[#1\right]}
\newcommand{\bbrkt}[1]{\llbracket #1 \rrbracket}

% %
\newenvironment{intuit}{\textit{Intuition - }\em}{}

% % Types
\newcommand{\term}{\mathsf{term}}
\newcommand{\type}{\mathsf{type}}
\newcommand{\IsOf}[2]{#1 \, : \, #2}
\newcommand{\Subst}[3]{[#1 / #2] #3}
\newcommand{\SortCS}{\mathsf{Sort}}
\newcommand{\ElCS}{\mathsf{El}}
\newcommand{\PiCS}[3]{\{#1 \, : \, #2\} \, #3}
\newcommand{\LamCS}[3]{[#1 \, : \, #2] \, #3}
\newcommand{\ApCS}[2]{#1 \, #2}
\newcommand{\EqCS}[3]{#2 =_{#1} #3}
\newcommand{\SelfCS}{\mathsf{self}}
\newcommand{\CtxExt}[3]{#1,#2 : #3}
\newcommand{\BNFSep}{\, \, | \, \,}
\newcommand{\CtxJdg}[1]{#1 \vdash \mathsf{ctx}}
\newcommand{\ClsJdg}[2]{#1 \vdash #2 \,\, \mathsf{cls}}
\newcommand{\ObjJdg}[3]{#1 \vdash #2 \, : \, #3 }
\newcommand{\IdClsJdg}[3]{\ClsJdg{#1}{#2 = #3}}
\newcommand{\IdObjJdg}[4]{\ObjJdg{#1}{#2 = #3}{#4}}
\newcommand{\CtxSortJdg}[1]{#1 \vdash \mathsf{Sort}}

\newcommand{\SiCtxJdg}[1]{#1 \vdash_\Si \mathsf{ctx}}
\newcommand{\SiClsJdg}[2]{#1 \vdash_\Si #2 \,\, \mathsf{cls}}
\newcommand{\SiObjJdg}[3]{#1 \vdash_\Si #2 \, : \, #3 }
\newcommand{\SiIdClsJdg}[3]{\SiClsJdg{#1}{#2 = #3}}
\newcommand{\SiIdObjJdg}[4]{\SiObjJdg{#1}{#2 = #3}{#4}}
\newcommand{\SiCtxSortJdg}[1]{#1 \vdash_\Si \mathsf{Sort}}

% % Proof
\newenvironment{forward}{($\implies$)}{}
\newenvironment{backward}{($\limplies$)}{}

% % Ad-hoc Notation
\DeclareMathOperator{\supp}{supp}
\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\st}{\,|\,}
\newcommand{\subs}{\subseteq}
\newcommand{\nothing}{\varnothing}
\newcommand{\inv}{^{-1}}
\renewcommand{\bar}[1]{\overline{#1}}
\newcommand{\abs}[1]{\left\vert #1 \right\vert}
\newcommand{\norm}[1]{\left\Vert #1 \right\Vert}
\newcommand{\<}{\langle}
\renewcommand{\>}{\rangle}

% % Greek
\newcommand{\al}{\alpha}
\newcommand{\be}{\beta}
\newcommand{\ga}{\gamma}
\newcommand{\de}{\delta}
\newcommand{\ep}{\varepsilon}
\newcommand{\io}{\iota}
\newcommand{\ka}{\kappa}
\newcommand{\la}{\lambda}
\newcommand{\om}{\omega}
\newcommand{\si}{\sigma}
\newcommand{\ze}{\zeta}

\newcommand{\Ga}{\Gamma}
\newcommand{\De}{\Delta}
\newcommand{\Th}{\Theta}
\newcommand{\La}{\Lambda}
\newcommand{\Si}{\Sigma}
\newcommand{\Om}{\Omega}

% % Mathbb
\newcommand{\A}{\mathbb{A}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\M}{\mathbb{M}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\V}{\mathbb{V}}
\newcommand{\U}{\mathbb{U}}

% % Mathcal
\renewcommand{\AA}{\mathcal{A}}
\newcommand{\BB}{\mathcal{B}}
\newcommand{\CC}{\mathcal{C}}
\newcommand{\DD}{\mathcal{D}}
\newcommand{\EE}{\mathcal{E}}
\newcommand{\FF}{\mathcal{F}}
\newcommand{\GG}{\mathcal{G}}
\newcommand{\HH}{\mathcal{H}}
\newcommand{\II}{\mathcal{I}}
\newcommand{\JJ}{\mathcal{J}}
\newcommand{\KK}{\mathcal{K}}
\newcommand{\LL}{\mathcal{L}}
\newcommand{\MM}{\mathcal{M}}
\newcommand{\NN}{\mathcal{N}}
\newcommand{\OO}{\mathcal{O}}
\newcommand{\PP}{\mathcal{P}}
\newcommand{\QQ}{\mathcal{Q}}
\newcommand{\RR}{\mathcal{R}}
\renewcommand{\SS}{\mathcal{S}}
\newcommand{\TT}{\mathcal{T}}
\newcommand{\UU}{\mathcal{U}}
\newcommand{\VV}{\mathcal{V}}
\newcommand{\WW}{\mathcal{W}}
\newcommand{\XX}{\mathcal{X}}
\newcommand{\YY}{\mathcal{Y}}
\newcommand{\ZZ}{\mathcal{Z}}

% % Mathfrak
\newcommand{\f}[1]{\mathfrak{#1}}

% % Mathrsfs
\newcommand{\s}[1]{\mathscr{#1}}

% % Category Theory
\newcommand{\Obj}[1]{\mathrm{Obj}\left(#1\right)}
\newcommand{\End}[2]{\mathrm{End}_{#1}#2\,}
\newcommand{\Aut}[2]{\mathrm{Aut}_{#1}#2\,}
\newcommand{\op}{^{\textsf{op}}}
\newcommand{\iso}{\cong}
\newcommand{\id}[1]{\mathbbm{1}_{#1}}
\newcommand{\hookr}{\hookrightarrow}
\newcommand{\yo}{\mathbf{y}}
\newcommand{\TERM}{\mathbf{1}}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\codom}{codom}

\newcommand{\CAT}{\mathbf{Cat}}
\newcommand{\SET}{\mathbf{Set}}
\newcommand{\PSH}[1]{\mathbf{PSh}\brkt{#1}}
\newcommand{\SH}[1]{\mathbf{Sh}\brkt{#1}}
% \newcommand{\TOP}{\mathbf{Top}}
%\newcommand{\GRP}{\mathbf{Grp}}
% \newcommand{\RING}{\mathbf{Ring}}
% \newcommand{\MOD}[1][R]{#1\text{-}\mathbf{Mod}}
% \newcommand{\VEC}[1][K]{#1\text{-}\mathbf{Vec}}
% \newcommand{\ALG}[1][R]{#1\text{-}\mathbf{Alg}}



% % xcolor
\definecolor{darkgrey}{gray}{0.10}
\definecolor{lightgrey}{gray}{0.50}
\definecolor{slightgrey}{gray}{0.80}
\definecolor{softblue}{RGB}{30,100,200}
\definecolor{syntax}{RGB}{52, 72, 115}
\definecolor{semantics}{RGB}{168, 50, 82}

% % hyperref
\hypersetup{
      colorlinks = true,
      linkcolor = {softblue},
      citecolor = {blue}
}

\newcommand{\link}[1]{\hypertarget{#1}{}}
\newcommand{\linkto}[2]{\hyperlink{#1}{#2}}

% Theorems

% % custom theoremstyles
\newtheoremstyle{definitionstyle}
{0pt}% above thm
{0pt}% below thm
{}% body font
{}% space to indent
{\bf}% head font
{\vspace{1mm}}% punctuation between head and body
{\newline}% space after head
{\thmname{#1}\thmnote{\,\,--\,\,#3}}

% % custom theoremstyles
\newtheoremstyle{propositionstyle}
{0pt}% above thm
{0pt}% below thm
{}% body font
{}% space to indent
{\bf}% head font
{\vspace{1mm}}% punctuation between head and body
{\newline}% space after head
{\thmname{#1}\thmnote{\,\,--\,\,#3}}

\newtheoremstyle{exercisestyle}%
{0pt}% above thm
{0pt}% below thm
{\it}% body font
{}% space to indent
{\scshape}% head font
{.}% punctuation between head and body
{ }% space after head
{\thmname{#1}\thmnote{ (#3)}}

\newtheoremstyle{remarkstyle}%
{0pt}% above thm
{0pt}% below thm
{}% body font
{}% space to indent
{\it}% head font
{.}% punctuation between head and body
{ }% space after head
{\thmname{#1}\thmnote{\,\,--\,\,#3}}

% % Theorem environments

\theoremstyle{definitionstyle}
\newmdtheoremenv[
    %skipabove = \baselineskip
    linewidth = 1.2pt,
    leftmargin = 5pt,
    rightmargin = 0pt,
    linecolor = darkgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{dfn}{Definition}
\newmdtheoremenv[
    linewidth = 1 pt,
    leftmargin = 5pt,
    rightmargin = 0pt,
    linecolor = lightgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{prop}{Proposition}
\newmdtheoremenv[
    linewidth = 1 pt,
    leftmargin = 5pt,
    rightmargin = 0pt,
    linecolor = lightgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{cor}{Corollary}
\newmdtheoremenv[
    linewidth = 1 pt,
    leftmargin = 5pt,
    rightmargin = 0pt,
    linecolor = lightgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{lem}{Lemma}
\newmdtheoremenv[
    linewidth = 1.2pt,
    leftmargin = 5pt,
    rightmargin = 0pt,
    linecolor = darkgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{thm}{Theorem}

\theoremstyle{exercisestyle}
\newmdtheoremenv[
    linewidth = 0.7 pt,
    leftmargin = 20pt,
    rightmargin = 0pt,
    linecolor = darkgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{ex}{Exercise}
\newmdtheoremenv[
    linewidth = 0.7 pt,
    leftmargin = 20pt,
    rightmargin = 0pt,
    linecolor = darkgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{eg}{Example}
\newmdtheoremenv[
    linewidth = 0.7 pt,
    leftmargin = 20pt,
    rightmargin = 0pt,
    linecolor = darkgrey,
    topline = false,
    bottomline = false,
    rightline = false,
    footnoteinside = true
]{nttn}{Notation}

\theoremstyle{remarkstyle}
\newtheorem{rmk}{Remark}

% % footnotes
\renewcommand{\thempfootnote}{$\dagger$}
\MakePerPage{footnote}

% % tikzcd diagram
\newenvironment{cd}{
    \begin{figure}[H]
    \centering
    \begin{tikzcd}
}{
    \end{tikzcd}
    \end{figure}
}

% % Section titles
\titlespacing*{\section}
{0pt}{5ex plus 1ex minus .2ex}{4ex plus .2ex}
\titlespacing*{\subsection}
{0pt}{5ex plus 1ex minus .2ex}{4ex plus .2ex}

% Syntax highlighting for lean
\usepackage{color}
\definecolor{keywordcolor}{rgb}{0.6, 0.3, 0.6}   % light purple
\definecolor{tacticcolor}{rgb}{0.2, 0.2, 0.6}    % dark purple
\definecolor{commentcolor}{rgb}{0.4, 0.4, 0.4}   % grey
\definecolor{symbolcolor}{rgb}{0.7, 0.2, 0.2}    % blue
\definecolor{sortcolor}{rgb}{0.2, 0.7, 0.7}      % cyan
\definecolor{attributecolor}{RGB}{120,0,0}       % maroon
\definecolor{draculaGrey}{RGB}{25, 27, 15}       % grey

\def\lstlanguagefiles{lstlean.tex}

% set default language
\lstset{language=lean}

\begin{document}
\title{Equational Logical Frameworks as Locally Cartesian Closed Categories}
\author{Joseph Hua}
\maketitle

\tableofcontents

\section{Overview}

In \linkto{sec_2}{section 2}, we present the syntax for
an \textit{equational logical framework} (LF for short).
In \linkto{sec_3}{section 3}, we set out the main categorical
definitions that are relevant to the discussion.
In \linkto{sec_4}{section 4}, we describe the category of contexts
for the LF.
The main goal is to identify two display map subcategories of the category of contexts,
$S_{\pi}$.

\subsection{Potential points of confusion}
It is \textit{not true} that the category of contexts $\CC$ for the LF is locally Cartesian closed.
However, we can find two display map subcategories
$\SS_{\Pi} \hookr \SS_{\Pi,=} \hookr \CC$
that are locally Cartesian closed,
and these correspond to the $\SortCS$ or universe for the LF.
It is \textit{not true} that general locally closed Cartesian categories are suitable general
semantics for the LF, or even for the subcategory, due to coherence issues for pullback.
For general semantics, we should use categories with families \cite{castellan2020categories},
categories with attributes \cite{JACOBS1993169},
or natural models \cite{awodey2017natural}.
One can verify that the category of contexts satisfies any of these semantics.

\subsection{Terminology}

We follow \cite{harper2021equational} and use the word ``class'' for what is usually called ``type'' and
the word ``object'' for what is usually called ``term''.
This is to distinguish between the meta-level class in the logical framework
and types internal to the type theory defined in the logical framework.
To not confuse this with the categorical notion of object,
we will write $\CC$-object for an object in a category $\CC$.


\input{LF_syntax.tex}

\input{categorical_def.tex}

\input{syntactic_category.tex}

\section{Extensions}

Let us return to studying $\SS_{\Pi}$ and $\SS_{\Pi,=}$.



% \begin{align*}
%   & \ObjJdg{\Ga}{S}{\SortCS}          & \rightsquigarrow & \ObjJdg{\Ga}{\De}{\SortCS} \\
%   & \CtxExt{\Ga}{X}{S}                & \rightsquigarrow & \De \\
%   & \ClsJdg{\CtxExt{\Ga}{X}{S}}{K}    & \rightsquigarrow & \ObjJdg{E}{\}{\De} \\
%   & \ObjJdg{\CtxExt{\Ga}{X}{S}}{O}{K} & \rightsquigarrow & \ObjJdg{\De}{\si}{E} \\
%   & \ObjJdg{\CtxExt{\Ga}{X}{S}}{O}{K}
% \end{align*}

% In this category the objects are contexts.
% In the case of $\STLC$ we could equivalently see contexts as closed classes
% $\ClsJdg{\bullet}{K}$ by taking the product of all the types appearing in the context.




\bibliography{refs}{}
\bibliographystyle{alpha}
\end{document}

%% Acknowledgements: Astra Kolomatskaia, Kian Cho, Robert Harper, Steve Awodey
